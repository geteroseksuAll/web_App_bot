<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js"></script>
  </head>

  <body>
    <img src="logo.png" />
    <p class="list-header-text bold remove">Возможности после покупки:</p>
    <ul class="advantages-list remove">
      <li class="advantages remove">
        ⭐️ бессрочный доступ к материалам канала
      </li>
      <li class="advantages remove">
        ⭐️ литературные подкасты по произведениям XVIII — первой половины XIX
        в. из кодификатора ОГЭ, ЕГЭ
      </li>
      <li class="advantages remove">⭐️ конспекты к каждому подкасту</li>
      <li class="advantages remove">
        ⭐️ ссылки на дополнительные видео-лекции, статьи, учебники и материалы
        по теме
      </li>
      <li class="advantages remove">
        ⭐️ теоретическая помощь модератора в чате канала
      </li>
      <li class="advantages remove">⭐️ авторские материалы</li>
    </ul>
    <p class="list-header-text bold remove">
      Кому будут полезны наши подкасты?
    </p>
    <ul>
      <li class="advantages remove">
        ✏️ Учащимся 9,10,11 классов, сдающим экзамены (ОГЭ, ЕГЭ) по литературе
      </li>
      <li class="advantages remove">
        ✏️ Учащимся старшей школы, чтобы подтянуть свои знания по дисциплине
      </li>
      <li class="advantages remove">
        ✏️ Учителям литературы, которые хотят освежить быстро свои знания перед
        уроком по тому или иному произведению
      </li>
      <li class="advantages remove">
        ✏️ Любителям литературы, желающим расширить свой кругозор
      </li>
    </ul>
    <button type="button" class="pay_bttn bttn" onclick="deleteElem()">
      Оплатить
    </button>
  </body>
  <script>
    let tg = window.Telegram.WebApp; //получаем объект webapp телеграма

    let button_method = 0;
    console.log(button_method);
    console.log(document.getElementsByClassName("remove"));

    document
      .getElementById("make_payment")
      .addEventListener("click", function () {
        // Получаем значения параметров client_id и tariff из URL
        var urlParams = new URLSearchParams(window.location.search);
        var clientId = urlParams.get("client_id");
        var requestUrl = "";
        var tariff = document.querySelector(
          'input[name="tariff"]:checked'
        ).value;
        if (clientId) {
          requestUrl =
            "/payments/request?level=" + tariff + "&client_id=" + clientId;
        } else {
          var tgWebAppStartParamURL = urlParams.get("tgWebAppStartParam");
          tgWebAppStartParamURL = tgWebAppStartParamURL.replace(/=/, "%3D");
          requestUrl =
            "/payments/request?tgWebAppStartParam=" +
            tgWebAppStartParamURL +
            "___level%3D" +
            tariff;
        }
        alert(requestUrl);

        // Формируем URL для запроса
        // var requestUrl = '/payments/request?level=' + tariff + '&client_id=' + clientId;

        // Отправляем запрос на сервер
        fetch(requestUrl)
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
            // Обрабатываем результат
            var resultUrl = data.result;
            // Перенаправляем пользователя по ссылке из result
            window.location.href = resultUrl;
          })
          .catch(function (error) {
            console.log("Ошибка:", error);
          });
      });
  </script>

  <style>
    @font-face {
      font-family: "Montserrat-Medium";
      src: url(fonts/Montserrat-Medium.ttf);
      font-weight: normal;
      font-style: normal;
    }
    ul {
      list-style-type: none;
    }
    body {
      font-family: "Montserrat-Medium";
      color: var(--tg-theme-text-color);
      background: var(--tg-theme-bg-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 16px;
    }
    .bold {
      font-size: 20px;
    }
    p {
      text-align: center;
    }
    li {
      margin-right: 10px;
    }
    li:not(:last-child) {
      margin-bottom: 10px;
    }

    .explanation-text {
      color: var(--tg-theme-hint-color);
    }
    .advantages {
      text-align: left;
      color: var(--tg-theme-hint-color);
    }

    .bttn {
      background: var(--tg-theme-button-color);
      color: var(--tg-theme-button-text-color);
      width: 95%;
      font-size: 20px;
      border-radius: 10px;
      color: var(--tg-theme-text-color);
      border: none;
      padding: 15px;
      margin-top: 10px;
    }
    img {
      border-radius: 40px;
      width: 80px;
      height: 80px;
    }

    @media screen and (min-width: 400px) {
      li {
        margin-right: 0px;
      }
      body {
        font-size: 30px;
      }
      img {
        border-radius: 100px;
        width: 200px;
        height: 200px;
      }
      .bold {
        font-size: 50px;
      }
      .bttn {
        margin-top: 30px;
        font-size: 50px;
        border-radius: 20px;
        color: var(--tg-theme-text-color);
        padding: 30px;
      }
    }
  </style>
</html>
